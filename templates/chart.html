{% extends 'base.html' %}

{% block body %}
<div class="container-fluid">
    <div class="row">
        <div class="col d-flex justify-content-center">
            <!-- <h1>{{user.first_name}}'s Auditions</h1> -->
        </div>
    </div>
    <div class="chart-container p-5 border" style="background-color: rgb(6, 7, 7)">
        <div class="row" id="chart-2-row">
            <div class="col-8">        
                <canvas id="myChart2"></canvas>
            </div>
            <div class="col-4">
                <div class="row" id="doughnut-row">
                    <div class="col-12">
                        <canvas id="myChart3" class="mb-4"></canvas>
                    </div>
                    <div class="col-12">
                        <canvas id="myChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div> 
</div>

<script>
$.get('/charts.json', (res) => {

    const industries = res.labels;
    const industryCount = res.values;
        
    let myChart1 = document.getElementById("myChart").getContext("2d");
    let colors = ['#BF4342', '#CE4257', '#EEC170', '#FFBD00', '#FAE588', '#FCEFB4','#FDF8E1','#F9DC5C','#FFC857', '#C06C84', '#A8A0B1'];
    
    let chart1 = new Chart(myChart1, {
        type: "doughnut",
        data: {
            labels: industries,
            datasets: [
                {
                    label: "Industry",
                    data: industryCount,
                    backgroundColor: colors ,
                }
            ]
        },
        options: {
        }
            
    })
});

$.get('/charts2.json', (res) => {
    console.log(res)
    const months = res.months;
    
    let colors2 = ['#BF4342', '#CE4257', '#EEC170', '#FFBD00', '#FAE588', '#FCEFB4','#FDF8E1','#F9DC5C','#FFC857', '#C06C84', '#A8A0B1'];
    
    console.log("RES DATASETS")
    console.log(res.datasets)
    let myChart2 = document.getElementById("myChart2").getContext("2d");

    for (i=0; i<res.datasets.length; i++) {
        res.datasets[i].backgroundColor = colors2[i];

        
    }

    
    let chart2 = new Chart(myChart2, {
        type: "bar",
        data: {
            labels: months,
            datasets: res.datasets,
        },

        options: {
            legend: {
                display: true,
            },
            scales: {
                yAxes: [{
                    ticks: {
                        max: 15,
                        min: 0,
                        stepSize: 1
                    }
                }],
                xAxes: [
                    {
                        
                    }
                ]
            }
        }
    })
}); 

$.get('/charts3.json', (res) => {

const agency = res.labels;
const auditionCounts = res.values;
console.log("AUDITION COUNTS")
console.log(auditionCounts)
let myChart3 = document.getElementById("myChart3").getContext("2d");
let colors3 = ['#BF4342', '#CE4257', '#EEC170', '#FFBD00', '#FAE588', '#FCEFB4','#FDF8E1','#F9DC5C','#FFC857', '#C06C84', '#A8A0B1'];

let chart3 = new Chart(myChart3, {
    type: "doughnut",
    data: {
        labels: agency,
        datasets: [
            {
                label: "Agency",
                data: auditionCounts,
                backgroundColor: colors3,
            }
        ]
    },
    
    options: {
            legend: {
                display: true,
            }
}
})
});

</script>

{% endblock %}